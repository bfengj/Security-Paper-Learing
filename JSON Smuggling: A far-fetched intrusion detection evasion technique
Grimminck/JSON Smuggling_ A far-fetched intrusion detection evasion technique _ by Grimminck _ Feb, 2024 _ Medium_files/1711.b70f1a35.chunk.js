(self.webpackChunklite=self.webpackChunklite||[]).push([[1711],{31579:(e,n,t)=>{"use strict";t.d(n,{DI:()=>r,nj:()=>l,q_:()=>a,IA:()=>o,Sn:()=>s});var i=t(87329),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat((0,i.Z)(r.definitions))},a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubscribeNewsletterV3Mutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shouldRecordConsent"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscribeNewsletterV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"newsletterV3Id"},value:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}}},{kind:"Argument",name:{kind:"Name",value:"shouldRecordConsent"},value:{kind:"Variable",name:{kind:"Name",value:"shouldRecordConsent"}}}]}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnsubscribeNewsletterV3Mutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unsubscribeNewsletterV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"newsletterV3Id"},value:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}}}]}]}}]},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FetchOrLazilyCreateNewsletterV3AndMaybeSubscribeMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat((0,i.Z)(r.definitions))}},61279:(e,n,t)=>{"use strict";t.d(n,{o:()=>S});var i=t(96156),r=t(34699),l=t(82492),a=t.n(l),o=t(21919),s=t(67294),u=t(25735),d=t(9354),c=t(61095),m=t(18627),v=t(66411),b=t(78285),p=t(31579),k=t(47148);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=function(e){var n=e.newsletterV3,t=e.creator,i=e.newsletterName,l=e.hideLinkInConfirmationToast,f=void 0!==l&&l,S=n||{},h=S.id,g=S.type,N=S.slug,y=S.collection,E=(null==n?void 0:n.user)||t,V=null!=i?i:null==n?void 0:n.name,O=s.useState(!1),D=(0,r.Z)(O,2),F=D[0],x=D[1],T=(0,d.T)({newsletterSlug:N,collectionSlug:null==y?void 0:y.slug,username:null==E?void 0:E.username}),C=T.viewerEdge,I=T.loading,M=(0,u.V)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),P=s.useState(!1),A=(0,r.Z)(P,2),U=A[0],_=A[1];s.useEffect((function(){_(!(null==C||!C.isSubscribed))}),[null==C?void 0:C.isSubscribed]);var j=(0,m.A)(),R=(0,v.Qi)(),B=(0,b.w)();F&&j.event("newsletterV3.subscribe.error",{newsletterV3Id:h});var L=function(e,n,t){if(t){var i={id:"User:".concat(null==E?void 0:E.id),fragment:p.nj,fragmentName:"useNewsletterV3Subscription_user"},r=e.readFragment(i);r&&e.writeFragment(w(w({},i),{},{data:w(w({},r),{},{newsletterV3:t})}))}if(C){var l=e.readQuery({query:k.C,variables:{newsletterSlug:N||"",collectionSlug:(null==y?void 0:y.slug)||null,username:(null==E?void 0:E.username)||null}}),o=a()({},l,{newsletterV3:{viewerEdge:{isSubscribed:n}}});e.writeQuery({query:k.C,variables:{newsletterSlug:N||"",collectionSlug:(null==y?void 0:y.slug)||null,username:(null==E?void 0:E.username)||null},data:o})}n&&null!=E&&E.id&&M&&(0,c.I0)(e,E.id,{isFollowing:!0})},Z=(0,o.D)(p.q_,{onCompleted:function(e){var n=e.subscribeNewsletterV3;x(!n),n&&(j.event("newsletterV3.subscribeClicked",{newsletterV3Id:h,source:R}),_(!0))},update:function(e){L(e,!0)}}),z=(0,r.Z)(Z,1)[0],G=(0,o.D)(p.IA,{onCompleted:function(e){var n=e.unsubscribeNewsletterV3;x(!n),n&&(_(!1),B({duration:f?5e3:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:V||null,newsletterType:g||null,unsubscribeFn:function(){return _(!1)},hideEmailSettingsLink:f,hideCloseButton:f}}))},update:function(e){L(e,!1)}}),H=(0,r.Z)(G,1)[0],W=(0,o.D)(p.Sn,{onCompleted:function(e){var n=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;x(!n),n&&(j.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.id,source:R}),_(!0))},update:function(e,n){var t,i=w({},null===(t=n.data)||void 0===t?void 0:t.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);L(e,!0,i)}}),q=(0,r.Z)(W,1)[0];return{isSubscribed:U,hasError:F,setSubscribe:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];x(!1),e&&!n&&null!=t&&t.id?q({variables:{userId:null==t?void 0:t.id}}):e&&null!=n&&n.id?z({variables:{newsletterV3Id:null==n?void 0:n.id,shouldRecordConsent:i}}):null!=n&&n.id?H({variables:{newsletterV3Id:null==n?void 0:n.id}}):x(!0)},loading:I}}},47148:(e,n,t)=>{"use strict";t.d(n,{C:()=>r});var i=t(87329),r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewsletterV3ViewerEdge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newsletterSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newsletterV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"newsletterSlug"},value:{kind:"Variable",name:{kind:"Name",value:"newsletterSlug"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3ViewerEdge_newsletterV3ViewerEdge"}}]}}]}}]}}]}}].concat((0,i.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3ViewerEdge_newsletterV3ViewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3ViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isSubscribed"}}]}}]))}},9354:(e,n,t)=>{"use strict";t.d(n,{T:()=>l});var i=t(64718),r=t(47148),l=function(e){var n,t=e.newsletterSlug,l=void 0===t?"":t,a=e.collectionSlug,o=void 0===a?null:a,s=e.username,u=void 0===s?null:s,d=(0,i.a)(r.C,{variables:{newsletterSlug:l,collectionSlug:o,username:u},ssr:!1,skip:!l&&!u}),c=d.loading,m=d.error,v=d.data;return c?{loading:c}:m?{error:m}:{viewerEdge:null==v||null===(n=v.newsletterV3)||void 0===n?void 0:n.viewerEdge}}},43822:(e,n,t)=>{"use strict";t.d(n,{a:()=>v});var i=t(96156),r=t(67294),l=t(86706),a=t(47230),o=t(93310),s=t(18627),u=t(66411),d=t(50458);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=(0,l.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var n=e.authDomain,t=e.buttonSize,i=e.buttonStyle,l=e.children,c=e.eventData,v=void 0===c?{}:c,b=e.inline,p=void 0!==b&&b,k=e.isButton,f=void 0!==k&&k,w=e.linkStyle,S=void 0===w?"SUBTLE":w,h=e.post,g=e.redirectUrl,N=e.width,y=e.id,E=e.onClick,V=g||(0,d.OA)(n),O=(0,s.A)(),D=(0,u.Lk)(),F=function(){var e,n;O.event("upsell.clicked",m(m({},v),{},{dimension:null==D?void 0:D.dimension,locationId:null==D?void 0:D.dimension,postId:null==h?void 0:h.id,authorId:null==h||null===(e=h.creator)||void 0===e?void 0:e.id,sequenceId:(null==h||null===(n=h.sequence)||void 0===n?void 0:n.sequenceId)||""}))};return f?r.createElement(a.zx,{buttonStyle:i,href:V,onClick:function(){null==E||E(),F()},size:t,width:N,id:y},l):r.createElement(o.r,{onClick:function(){null==E||E(),F()},href:V,linkStyle:S,inline:p,id:y},l)}))},31711:(e,n,t)=>{"use strict";t.d(n,{N:()=>re});var i=t(34699),r=t(67294),l=t(32317),a=t(21919),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserPostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdatePostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}}]}}]}}]},s=t(6443),u=t(14818),d=t(13791),c=t(77355),m=t(54945),v=t(87691),b=t(18627),p=t(66411),k=t(43487),f=t(87498),w=t(78870),S=t(50458),h="after_subscribe_membership_upsell",g=function(e){var n=e.user,t=e.isVisible,l=e.hide,g=(0,k.v9)((function(e){return e.config.authDomain})),N=(0,b.A)(),y=(0,s.H)(),E=y.value,V=y.loading;r.useEffect((function(){var e;V||null!=E&&E.postSubscribeMembershipUpsellShownAt||(N.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:h}),D())}),[V]);var O=(0,a.D)(o,{optimisticResponse:{userUpdatePostSubscribeMembershipUpsellShownAt:{__typename:"User",id:(null==E?void 0:E.id)||"",postSubscribeMembershipUpsellShownAt:(new Date).getTime()}}}),D=(0,i.Z)(O,1)[0];return r.createElement(p.cW,{source:{name:h}},r.createElement(d.v,{isVisible:t,hide:l,withCloseButton:!0,withAnimation:!0,buttonStyle:"STRONG",buttonSize:"REGULAR",cancelText:"Not now",confirmText:"Become a member",onConfirm:function(){var e,t;N.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:h}),t=(0,w.Rk)((0,S.c5)(g),{subscribeToUserId:n.id,source:h}),window.location.href=t},showCancelButton:!0,isDestructiveAction:!1},r.createElement(c.x,{marginBottom:"24px"},r.createElement(u.z,{miroId:n.imageId||f.gG,alt:n.name||"",diameter:80,freezeGifs:!1})),r.createElement(c.x,{marginBottom:{xs:"8px",sm:"8px",md:"16px",lg:"16px",xl:"16px"}},r.createElement(m.H2,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},"You’re subscribed to get email updates. Become a member for more.")),r.createElement(c.x,{marginBottom:"32px"},r.createElement(v.F,{tag:"span",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Your membership fee directly supports ",n.name," and other writers you read. Get full access to every story on Medium."))))},N=t(77280),y=t(61279),E=t(93661),V=t(98863),O=t(26350),D=t(43822),F=t(47230),x=t(73917),T=t(69992),C=t(1383),I=t(30020),M=t(14646),P=t(31889),A=t(34135),U=t(75221),_=t(78285);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},j.apply(this,arguments)}var R=r.createElement("path",{d:"M14 7.29L15.6 9 18 6M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),B=r.createElement("path",{d:"M6 8.44l5.27 3.87 1.4-1.06.7-.52"});const L=function(e){return r.createElement("svg",j({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),R,B)};function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Z.apply(this,arguments)}var z=r.createElement("path",{d:"M24 13l2 2 3-3.5M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),G=r.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const H=function(e){return r.createElement("svg",Z({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),z,G)};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},W.apply(this,arguments)}var q=r.createElement("path",{d:"M14.58 6.89h3.92M16.39 9V5.08M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),Q=r.createElement("path",{d:"M6 8.44l5.27 3.87 2.81-2.11"});const K=function(e){return r.createElement("svg",W({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),q,Q)};function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Y.apply(this,arguments)}var J=r.createElement("rect",{x:26.25,y:9.25,width:.5,height:6.5,rx:.25}),X=r.createElement("rect",{x:29.75,y:12.25,width:.5,height:6.5,rx:.25,transform:"rotate(90 29.75 12.25)"}),$=r.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),ee=r.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const ne=function(e){return r.createElement("svg",Y({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),J,X,$,ee)};var te=t(68894),ie=function(e){var n=e.user,t=e.showMembershipUpsellModal,l=void 0!==t&&t,a=e.showPostFollowSubscribeTooltip,o=void 0!==a&&a,u=e.hidePostFollowSubscribeTooltip,d=e.isVisible,m=void 0===d||d,f=e.isCompact,h=void 0!==f&&f,j=e.buttonStyleFn,R=void 0===j?function(e){return e?"OBVIOUS":"STRONG"}:j,B=r.useRef(null),Z=(0,M.I)(),z=(0,P.F)(),G=(0,s.H)().value,W=(0,te.O)(!1),q=(0,i.Z)(W,3),Q=q[0],Y=q[1],J=q[2],X=n.newsletterV3,$=(0,_.w)(),ee=(0,b.A)(),ie=(0,p.pK)(),re=(0,p.Qi)(),le=(0,N.PM)(),ae=(0,y.o)({newsletterV3:X,creator:n,newsletterName:n.name||void 0}),oe=ae.isSubscribed,se=ae.hasError,ue=ae.loading,de=ae.setSubscribe,ce=(0,k.v9)((function(e){return e.config.authDomain})),me=(0,w.Rk)((0,S.c5)(ce),{subscribeToUserId:n.id,source:re}),ve=!(null==G||!G.membership),be=r.useState(!1),pe=(0,i.Z)(be,2),ke=pe[0],fe=pe[1],we=r.useState(!1),Se=(0,i.Z)(we,2),he=Se[0],ge=Se[1],Ne=(0,p.P7)(le||"").susiEntry,ye=void 0===Ne?"":Ne,Ee=["newsletter_v3_promo","writer_subscription_landing"].includes(ye),Ve=["newsletter_v3_promo"].includes(ye),Oe=(0,E.OS)({membershipType:E.FM.Monthly}),De=!1,Fe=function(){var e;!De&&m&&xe()&&(ee.event("newsletterV3.subscribePresented",{newsletterV3Id:(null===(e=n.newsletterV3)||void 0===e?void 0:e.id)||"",source:ie}),De=!0)},xe=function(){var e;if(!B.current)return!1;var n=null===(e=B.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};r.useEffect((function(){return Fe(),window&&A.V6.on("scroll",Fe),function(){A.V6.off("scroll",Fe)}}),[]),r.useEffect((function(){Fe()}),[m]);var Te=(0,te.O)(!1),Ce=(0,i.Z)(Te,3),Ie=Ce[0],Me=Ce[1],Pe=Ce[2],Ae=function(e,n){var t=(0,s.H)(),i=t.value,l=t.loading,a=r.useRef(null),o=!(null==i||!i.membership),u=(0,N.PM)(),d=(0,p.P7)(u||"").susiEntry,c=["newsletter_v3_promo","writer_subscription_landing","subscribe_user"].includes(void 0===d?"":d);if(l)return!1;if(null!==a.current)return a.current;var m=c&&!o&&!e.viewerEdge.isUser&&!!e.isPartnerProgramEnrolled&&!(null!=i&&i.postSubscribeMembershipUpsellShownAt);return a.current=m,m}(n),Ue=r.useState(!1),_e=(0,i.Z)(Ue,2),je=_e[0],Re=_e[1];r.useEffect((function(){l&&oe&&!je&&Ae?Me():Pe()}),[oe,je,Ae]),r.useEffect((function(){le&&!Ae&&Ee&&oe&&(!Ve&&re===ye||Ve)&&$({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:n.name,newsletterType:U.Rr.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return de(!1)}}})}),[le,oe]),r.useEffect((function(){if(oe&&he&&X){var e=!ve&&!!n.isPartnerProgramEnrolled;e&&ee.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:X.id,source:re}),fe(e),ge(!1)}}),[oe,he,X]);var Be=(0,V.f)().isWorkingPreview;if(se||n.viewerEdge.isUser&&!Be)return null;var Le,Ze=R(!!oe),ze=function(e,n){return function(t){return{stroke:n?t.colorTokens.background.neutral.secondary.base:e,height:h?"23px":"36px",width:h?"23px":"36px"}}},Ge=Z(ze("OBVIOUS"===Ze?z.colorTokens.background.accent.primary.base:z.baseColor.fill.dark,ue)),He=Z(ze("STRONG"===Ze?z.colorTokens.background.neutral.primary.base:z.backgroundColor,ue));Le=oe?h?r.createElement(L,{className:Ge}):r.createElement(H,{className:Ge}):h?r.createElement(K,{className:He}):r.createElement(ne,{className:He});var We=r.createElement(F.zx,{loading:ue,buttonStyle:Ze,onClick:function(){var e;ge(!oe),G?oe?de(!1):G&&G.allowEmailAddressSharingEditorWriter?de(!0,!1):Y():null!==(e=n.newsletterV3)&&void 0!==e&&e.id?ee.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.newsletterV3.id,source:re}):ee.event("user.LOSubscribeClicked",{targetUserId:n.id,source:re})},padding:"0","aria-label":"Subscribe"},Le),qe=function(){return r.createElement(c.x,{padding:"14px 12px 20px",maxWidth:"220px"},r.createElement(v.F,{tag:"div",scale:"S",color:"DARKER"},r.createElement("strong",null,"You're subscribed to ",n.name,". Become a member for more.")," Get full access to every story on Medium for ",Oe," a month."),r.createElement(c.x,{paddingTop:"8px"},r.createElement(D.a,{isButton:!0,buttonStyle:"STRONG",buttonSize:"SMALL",redirectUrl:me,width:"150px",onClick:function(){ee.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:X.id,source:re})}},r.createElement(c.x,{textAlign:"center"},r.createElement(v.F,{scale:"S",color:"WHITE"},"Become a member")))))},Qe=function(){return r.createElement(c.x,{padding:"10px 12px",maxWidth:"166px"},r.createElement(v.F,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",n.name," publishes."))},Ke=function(e){var n=e.children;return r.createElement(x.J,{isVisible:!!u&&!oe,hide:u,placement:"bottom",popoverRenderFn:Qe,targetDistance:10,role:"tooltip"},n)},Ye=function(e){var n=e.children;return r.createElement(x.J,{isVisible:!ue&&ke,hide:function(){return fe(!1)},placement:"bottom",popoverRenderFn:qe,targetDistance:10,role:"tooltip"},n)},Je=function(e){var n=e.children;return r.createElement(T.$,{isVisible:!ue&&!oe,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:Qe,role:"tooltip",targetDistance:10},n)},Xe=function(e){var n=e.children;return o&&!oe?r.createElement(Ke,null,n):ke?r.createElement(Ye,null,n):oe?r.createElement(I._,{tooltipText:"Subscribed",targetDistance:10},n):r.createElement(Je,null,n)};return r.createElement("div",{ref:B},r.createElement(Xe,null,r.createElement(c.x,null,G&&r.createElement(C.Q,{onConfirm:function(){de(!0,!0)},isVisible:Q,hide:J,titleText:"Confirm your subscription to ".concat(n.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),G?We:r.createElement(O.R,{operation:"register",newsletterV3:X,user:n,actionUrl:X?(0,S.Zu)(X.id):(0,S.lc)(n.id),susiEntry:"subscribe_user"},We))),Ie&&r.createElement(g,{user:n,isVisible:Ie,hide:function(){Re(!0),Pe()}}))},re=function(e){var n=e.creator,t=e.followButtonSize,a=void 0===t?"REGULAR":t,o=e.shouldHideTooltip,s=void 0!==o&&o,u=e.post,d=e.showMembershipUpsellModal,m=e.susiEntry,v=e.isVisible,b=e.width,p=e.isSubscribeCompact,k=void 0!==p&&p,f=e.buttonStyleFn,w=r.useState(!1),S=(0,i.Z)(w,2),h=S[0],g=S[1];return r.createElement(r.Fragment,null,r.createElement(l.B,{buttonSize:a,onClick:function(){n.viewerEdge.isFollowing||g(!0)},post:u,user:n,susiEntry:m,width:b,buttonStyleFn:f}),r.createElement(c.x,{marginLeft:k?"4px":"8px"},r.createElement(ie,{user:n,showMembershipUpsellModal:d,showPostFollowSubscribeTooltip:h&&!s,hidePostFollowSubscribeTooltip:function(){return g(!1)},isVisible:v,isCompact:k,buttonStyleFn:f})))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1711.b70f1a35.chunk.js.map